"use strict";(self.webpackChunkneoforged_docs=self.webpackChunkneoforged_docs||[]).push([[7651],{2718:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>r,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var n=o(5893),s=o(1151);const a={},i="Blockstates",l={id:"blocks/states",title:"Blockstates",description:"Often, you will find yourself in a situation where you want different states of a block. For example, a wheat crop has eight growth stages, and making a separate block for each stage feels wrong. Or you have a slab or slab-like block - one bottom state, one top state, and one state that has both.",source:"@site/versioned_docs/version-1.20.4/blocks/states.md",sourceDirName:"blocks",slug:"/blocks/states",permalink:"/Neoforge-Korean-Documentation/docs/1.20.4/blocks/states",draft:!1,unlisted:!1,tags:[],version:"1.20.4",frontMatter:{},sidebar:"mainSidebar",previous:{title:"Blocks",permalink:"/Neoforge-Korean-Documentation/docs/1.20.4/blocks/"},next:{title:"Events",permalink:"/Neoforge-Korean-Documentation/docs/1.20.4/concepts/events"}},r={},c=[{value:"Blockstate Properties",id:"blockstate-properties",level:2},{value:"When to Use Blockstates",id:"when-to-use-blockstates",level:2},{value:"Blockstates vs. Separate Blocks",id:"blockstates-vs-separate-blocks",level:3},{value:"Blockstates vs. Block Entities",id:"blockstates-vs-block-entities",level:3},{value:"Implementing Blockstates",id:"implementing-blockstates",level:2},{value:"Using Blockstates",id:"using-blockstates",level:2},{value:"<code>Level#setBlock</code>",id:"levelsetblock",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"blockstates",children:"Blockstates"}),"\n",(0,n.jsx)(t.p,{children:"Often, you will find yourself in a situation where you want different states of a block. For example, a wheat crop has eight growth stages, and making a separate block for each stage feels wrong. Or you have a slab or slab-like block - one bottom state, one top state, and one state that has both."}),"\n",(0,n.jsx)(t.p,{children:"This is where blockstates come into play. Blockstates are an easy way to represent the different states a block can have, like a growth stage or a slab placement type."}),"\n",(0,n.jsx)(t.h2,{id:"blockstate-properties",children:"Blockstate Properties"}),"\n",(0,n.jsxs)(t.p,{children:["Blockstates use a system of properties. A block can have multiple properties of multiple types. For example, an end portal frame has two properties: whether it has an eye (",(0,n.jsx)(t.code,{children:"eye"}),", 2 options) and which direction it is placed in (",(0,n.jsx)(t.code,{children:"facing"}),", 4 options). So in total, the end portal frame has 8 (2 * 4) different blockstates:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"minecraft:end_portal_frame[facing=north,eye=false]\nminecraft:end_portal_frame[facing=east,eye=false]\nminecraft:end_portal_frame[facing=south,eye=false]\nminecraft:end_portal_frame[facing=west,eye=false]\nminecraft:end_portal_frame[facing=north,eye=true]\nminecraft:end_portal_frame[facing=east,eye=true]\nminecraft:end_portal_frame[facing=south,eye=true]\nminecraft:end_portal_frame[facing=west,eye=true]\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The notation ",(0,n.jsx)(t.code,{children:"blockid[property1=value1,property2=value,...]"})," is the standardized way of representing a blockstate in text form, and is used in some locations in vanilla, for example in commands."]}),"\n",(0,n.jsxs)(t.p,{children:["If your block does not have any blockstate properties defined, it still has exactly one blockstate - that is the one without any properties, since there are no properties to specify. This can be denoted as ",(0,n.jsx)(t.code,{children:"minecraft:oak_planks[]"})," or simply ",(0,n.jsx)(t.code,{children:"minecraft:oak_planks"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["As with blocks, every ",(0,n.jsx)(t.code,{children:"BlockState"})," exists exactly once in memory. This means that ",(0,n.jsx)(t.code,{children:"=="})," can and should be used to compare ",(0,n.jsx)(t.code,{children:"BlockState"}),"s. ",(0,n.jsx)(t.code,{children:"BlockState"})," is also a final class, meaning it cannot be extended. ",(0,n.jsxs)(t.strong,{children:["Any functionality goes in the corresponding ",(0,n.jsx)(t.a,{href:"/Neoforge-Korean-Documentation/docs/1.20.4/blocks/",children:"Block"})," class!"]})]}),"\n",(0,n.jsx)(t.h2,{id:"when-to-use-blockstates",children:"When to Use Blockstates"}),"\n",(0,n.jsx)(t.h3,{id:"blockstates-vs-separate-blocks",children:"Blockstates vs. Separate Blocks"}),"\n",(0,n.jsxs)(t.p,{children:["A good rule of thumb is: ",(0,n.jsx)(t.strong,{children:"if it has a different name, it should be a separate block"}),". An example is making chair blocks: the direction of the chair should be a property, while the different types of wood should be separated into different blocks. So you'd have one chair block for each wood type, and each chair block has four blockstates (one for each direction)."]}),"\n",(0,n.jsxs)(t.h3,{id:"blockstates-vs-block-entities",children:["Blockstates vs. ",(0,n.jsx)(t.a,{href:"/Neoforge-Korean-Documentation/docs/1.20.4/blockentities/",children:"Block Entities"})]}),"\n",(0,n.jsxs)(t.p,{children:["Here, the rule of thumb is: ",(0,n.jsx)(t.strong,{children:"if you have a finite amount of states, use a blockstate, if you have an infinite or near-infinite amount of states, use a block entity."})," Block entities can store arbitrary amounts of data, but are slower than blockstates."]}),"\n",(0,n.jsx)(t.p,{children:"Blockstates and block entities can be used in conjunction with one another. For example, the chest uses blockstate properties for things like the direction, whether it is waterlogged or not, or becoming a double chest, while storing the inventory, whether it is currently open or not, or interacting with hoppers is handled by a block entity."}),"\n",(0,n.jsx)(t.p,{children:'There is no definitive answer to the question "How many states are too much for a blockstate?", but we recommend that if you need more than 8-9 bits of data (i.e. more than a few hundred states), you should use a block entity instead.'}),"\n",(0,n.jsx)(t.h2,{id:"implementing-blockstates",children:"Implementing Blockstates"}),"\n",(0,n.jsxs)(t.p,{children:["To implement a blockstate property, in your block class, create or reference a ",(0,n.jsx)(t.code,{children:"public static final Property<?>"})," constant. While you are free to make your own ",(0,n.jsx)(t.code,{children:"Property<?>"})," implementations, the vanilla code provides several convenience implementations that should cover most use cases:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"IntegerProperty"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Implements ",(0,n.jsx)(t.code,{children:"Property<Integer>"}),". Defines a property that holds an integer value. Note that negative values are not supported."]}),"\n",(0,n.jsxs)(t.li,{children:["Created by calling ",(0,n.jsx)(t.code,{children:"IntegerProperty#create(String propertyName, int minimum, int maximum)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"BooleanProperty"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Implements ",(0,n.jsx)(t.code,{children:"Property<Boolean>"}),". Defines a property that holds a ",(0,n.jsx)(t.code,{children:"true"})," or ",(0,n.jsx)(t.code,{children:"false"})," value."]}),"\n",(0,n.jsxs)(t.li,{children:["Created by calling ",(0,n.jsx)(t.code,{children:"BooleanProperty#create(String propertyName)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"EnumProperty<E extends Enum<E>>"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Implements ",(0,n.jsx)(t.code,{children:"Property<E>"}),". Defines a property that can take on the values of an Enum class."]}),"\n",(0,n.jsxs)(t.li,{children:["Created by calling ",(0,n.jsx)(t.code,{children:"EnumProperty#create(String propertyName, Class<E> enumClass)"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["It is also possible to use only a subset of the Enum values (e.g. 4 out of 16 ",(0,n.jsx)(t.code,{children:"DyeColor"}),"s), see the overloads of ",(0,n.jsx)(t.code,{children:"EnumProperty#create"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"DirectionProperty"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Extends ",(0,n.jsx)(t.code,{children:"EnumProperty<Direction>"}),". Defines a property that can take on a ",(0,n.jsx)(t.code,{children:"Direction"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["Created by calling ",(0,n.jsx)(t.code,{children:"DirectionProperty#create(String propertyName)"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["Several convenience predicates are provided. For example, to get a property that represents the cardinal directions, call ",(0,n.jsx)(t.code,{children:'DirectionProperty.create("<name>", Direction.Plane.HORIZONTAL)'}),"; to get the X directions, ",(0,n.jsx)(t.code,{children:'DirectionProperty.create("<name>", Direction.Axis.X)'}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["The class ",(0,n.jsx)(t.code,{children:"BlockStateProperties"})," contains shared vanilla properties which should be used or referenced whenever possible, in place of creating your own properties."]}),"\n",(0,n.jsxs)(t.p,{children:["Once you have your property constant, override ",(0,n.jsx)(t.code,{children:"Block#createBlockStateDefinition(StateDefinition$Builder)"})," in your block class. In that method, call ",(0,n.jsx)(t.code,{children:"StateDefinition.Builder#add(YOUR_PROPERTY);"}),". ",(0,n.jsx)(t.code,{children:"StateDefinition.Builder#add"})," has a vararg parameter, so if you have multiple properties, you can add them all in one go."]}),"\n",(0,n.jsxs)(t.p,{children:["Every block will also have a default state. If nothing else is specified, the default state uses the default value of every property. You can change the default state by calling the ",(0,n.jsx)(t.code,{children:"Block#registerDefaultState(BlockState)"})," method from your constructor."]}),"\n",(0,n.jsxs)(t.p,{children:["If you wish to change which ",(0,n.jsx)(t.code,{children:"BlockState"})," is used when placing your block, override ",(0,n.jsx)(t.code,{children:"Block#getStateForPlacement(BlockPlaceContext)"}),". This can be used to, for example, set the direction of your block depending on where the player is standing or looking when they place it."]}),"\n",(0,n.jsxs)(t.p,{children:["To further illustrate this, this is what the relevant bits of the ",(0,n.jsx)(t.code,{children:"EndPortalFrameBlock"})," class look like:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:"public class EndPortalFrameBlock extends Block {\n    // Note: It is possible to directly use the values in BlockStateProperties instead of referencing them here again.\n    // However, for the sake of simplicity and readability, it is recommended to add constants like this.\n    public static final DirectionProperty FACING = BlockStateProperties.FACING;\n    public static final BooleanProperty EYE = BlockStateProperties.EYE;\n\n    public EndPortalFrameBlock(BlockBehaviour.Properties pProperties) {\n        super(pProperties);\n        // stateDefinition.any() returns a random BlockState from an internal set,\n        // we don't care because we're setting all values ourselves anyway\n        registerDefaultState(stateDefinition.any()\n                .setValue(FACING, Direction.NORTH)\n                .setValue(EYE, false)\n        );\n    }\n\n    @Override\n    protected void createBlockStateDefinition(StateDefinition.Builder<Block, BlockState> pBuilder) {\n        // this is where the properties are actually added to the state\n        pBuilder.add(FACING, EYE);\n    }\n\n    @Override\n    @Nullable\n    public BlockState getStateForPlacement(BlockPlaceContext pContext) {\n        // code that determines which state will be used when\n        // placing down this block, depending on the BlockPlaceContext\n    }\n}\n"})}),"\n",(0,n.jsx)(t.h2,{id:"using-blockstates",children:"Using Blockstates"}),"\n",(0,n.jsxs)(t.p,{children:["To go from ",(0,n.jsx)(t.code,{children:"Block"})," to ",(0,n.jsx)(t.code,{children:"BlockState"}),", call ",(0,n.jsx)(t.code,{children:"Block#defaultBlockState()"}),". The default blockstate can be changed through ",(0,n.jsx)(t.code,{children:"Block#registerDefaultState"}),", as described above."]}),"\n",(0,n.jsxs)(t.p,{children:["You can get the value of a property by calling ",(0,n.jsx)(t.code,{children:"BlockState#getValue(Property<?>)"}),", passing it the property you want to get the value of. Reusing our end portal frame example, this would look something like this:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:"// EndPortalFrameBlock.FACING is a DirectionProperty and thus can be used to obtain a Direction from the BlockState\nDirection direction = endPortalFrameBlockState.getValue(EndPortalFrameBlock.FACING);\n"})}),"\n",(0,n.jsxs)(t.p,{children:["If you want to get a ",(0,n.jsx)(t.code,{children:"BlockState"})," with a different set of values, simply call ",(0,n.jsx)(t.code,{children:"BlockState#setValue(Property<T>, T)"})," on an existing block state with the property and its value. With our lever, this goes something like this:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:"endPortalFrameBlockState = endPortalFrameBlockState.setValue(EndPortalFrameBlock.FACING, Direction.SOUTH);\n"})}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"BlockState"}),"s are immutable. This means that when you call ",(0,n.jsx)(t.code,{children:"#setValue(Property<T>, T)"}),", you are not actually modifying the blockstate. Instead, a lookup is performed internally, and you are given the blockstate object you requested, which is the one and only object that exists with these exact property values. This also means that just calling ",(0,n.jsx)(t.code,{children:"state#setValue"})," without saving it into a variable (for example back into ",(0,n.jsx)(t.code,{children:"state"}),") does nothing."]})}),"\n",(0,n.jsxs)(t.p,{children:["To get a ",(0,n.jsx)(t.code,{children:"BlockState"})," from the level, use ",(0,n.jsx)(t.code,{children:"Level#getBlockState(BlockPos)"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"levelsetblock",children:(0,n.jsx)(t.code,{children:"Level#setBlock"})}),"\n",(0,n.jsxs)(t.p,{children:["To set a ",(0,n.jsx)(t.code,{children:"BlockState"})," in the level, use ",(0,n.jsx)(t.code,{children:"Level#setBlock(BlockPos, BlockState, int)"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"int"})," parameter deserves some extra explanation, as its meaning is not immediately obvious. It denotes what is known as update flags."]}),"\n",(0,n.jsxs)(t.p,{children:["To help setting the update flags correctly, there are a number of ",(0,n.jsx)(t.code,{children:"int"})," constants in ",(0,n.jsx)(t.code,{children:"Block"}),", prefixed with ",(0,n.jsx)(t.code,{children:"UPDATE_"}),". These constants can be bitwise-ORed together (for example ",(0,n.jsx)(t.code,{children:"Block.UPDATE_NEIGHBORS | Block.UPDATE_CLIENTS"}),") if you wish to combine them."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.UPDATE_NEIGHBORS"})," sends an update to the neighboring blocks. More specifically, it calls ",(0,n.jsx)(t.code,{children:"Block#neighborChanged"}),", which calls a number of methods, most of which are redstone-related in some way."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.UPDATE_CLIENTS"})," syncs the block update to the client."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.UPDATE_INVISIBLE"})," explicitly does not update on the client. This also overrules ",(0,n.jsx)(t.code,{children:"Block.UPDATE_CLIENTS"}),", causing the update to not be synced. The block is always updated on the server."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.UPDATE_IMMEDIATE"})," forces a re-render on the client's main thread."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.UPDATE_KNOWN_SHAPE"})," stops neighbor update recursion."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.UPDATE_SUPPRESS_DROPS"})," disables block drops for the old block at that position."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.UPDATE_MOVE_BY_PISTON"})," is only used by piston code to signal that the block was moved by a piston. This is mainly responsible for delaying light engine updates."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.UPDATE_ALL"})," is an alias for ",(0,n.jsx)(t.code,{children:"Block.UPDATE_NEIGHBORS | Block.UPDATE_CLIENTS"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.UPDATE_ALL_IMMEDIATE"})," is an alias for ",(0,n.jsx)(t.code,{children:"Block.UPDATE_NEIGHBORS | Block.UPDATE_CLIENTS | Block.UPDATE_IMMEDIATE"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Block.NONE"})," is an alias for ",(0,n.jsx)(t.code,{children:"Block.UPDATE_INVISIBLE"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["There is also a convenience method ",(0,n.jsx)(t.code,{children:"Level#setBlockAndUpdate(BlockPos pos, BlockState state)"})," that calls ",(0,n.jsx)(t.code,{children:"setBlock(pos, state, Block.UPDATE_ALL)"})," internally."]})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},1151:(e,t,o)=>{o.d(t,{Z:()=>l,a:()=>i});var n=o(7294);const s={},a=n.createContext(s);function i(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);