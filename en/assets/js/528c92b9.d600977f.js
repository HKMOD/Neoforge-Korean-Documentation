"use strict";(self.webpackChunkneoforged_docs=self.webpackChunkneoforged_docs||[]).push([[119],{4831:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var i=r(5893),t=r(1151);const a={},c="Advancements",s={id:"resources/server/advancements",title:"Advancements",description:"Advancements are tasks that can be achieved by the player which may advance the progress of the game. Advancements can trigger based on any action the player may be directly involved in.",source:"@site/docs/resources/server/advancements.md",sourceDirName:"resources/server",slug:"/resources/server/advancements",permalink:"/Neoforge-Korean-Documentation/en/docs/resources/server/advancements",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"mainSidebar",previous:{title:"\ub370\uc774\ud130\ud329",permalink:"/Neoforge-Korean-Documentation/en/docs/resources/server/"},next:{title:"Conditionally-Loaded Data",permalink:"/Neoforge-Korean-Documentation/en/docs/resources/server/conditional"}},o={},d=[{value:"Advancement Criteria",id:"advancement-criteria",level:2},{value:"Custom Criteria Triggers",id:"custom-criteria-triggers",level:3},{value:"The SimpleCriterionTrigger.SimpleInstance Implementation",id:"the-simplecriteriontriggersimpleinstance-implementation",level:3},{value:"SimpleCriterionTrigger",id:"simplecriteriontrigger",level:3},{value:"Serialization",id:"serialization",level:3},{value:"Calling the Trigger",id:"calling-the-trigger",level:3},{value:"Advancement Rewards",id:"advancement-rewards",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"advancements",children:"Advancements"}),"\n",(0,i.jsx)(n.p,{children:"Advancements are tasks that can be achieved by the player which may advance the progress of the game. Advancements can trigger based on any action the player may be directly involved in."}),"\n",(0,i.jsxs)(n.p,{children:["All advancement implementations within vanilla are data driven via JSON. This means that a mod is not necessary to create a new advancement, only a ",(0,i.jsx)(n.a,{href:"https://minecraft.wiki/w/Data_pack",children:"data pack"}),". A full list on how to create and put these advancements within the mod's ",(0,i.jsx)(n.code,{children:"resources"})," can be found on the ",(0,i.jsx)(n.a,{href:"https://minecraft.wiki/w/Advancement/JSON_format",children:"Minecraft Wiki"}),". Additionally, advancements can be ",(0,i.jsx)(n.a,{href:"/Neoforge-Korean-Documentation/en/docs/resources/server/conditional#implementations",children:"loaded conditionally and defaulted"})," depending on what information is present (mod loaded, item exists, etc.). As with other data driven features, advancements can be generated via ",(0,i.jsx)(n.a,{href:"/Neoforge-Korean-Documentation/en/docs/datagen/server/advancements#advancement-generation",children:"data generators"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"advancement-criteria",children:"Advancement Criteria"}),"\n",(0,i.jsxs)(n.p,{children:["To unlock an advancement, the specified criteria must be met. Criteria are tracked through triggers which execute when a certain action is performed: killing an entity, changing an inventory, breading animals, etc. Any time an advancement is loaded into the game, the criteria defined are read and added as listeners to the trigger. Afterwards a trigger function is called (usually named ",(0,i.jsx)(n.code,{children:"#trigger"}),") which checks all listeners as to whether the current state meets the conditions of the advancement criteria. The criteria listeners for the advancement are only removed once the advancement has been obtained by completing all requirements."]}),"\n",(0,i.jsx)(n.p,{children:"Requirements are defined as an array of string arrays representing the name of the criteria specified on the advancement. An advancement is completed once one string array of criteria has been met:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// In some advancement JSON\n\n// List of defined criteria to meet\n"criteria": {\n  "example_criterion1": { /*...*/ },\n  "example_criterion2": { /*...*/ },\n  "example_criterion3": { /*...*/ },\n  "example_criterion4": { /*...*/ }\n},\n\n// This advancement is only unlocked once\n// - Criteria 1 AND 2 have been met\n// OR\n// - Criteria 3 and 4 have been met\n"requirements": [\n  [\n    "example_criterion1",\n    "example_criterion2"\n  ],\n  [\n    "example_criterion3",\n    "example_criterion4"\n  ]\n]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["A list of criteria triggers defined by vanilla can be found in ",(0,i.jsx)(n.code,{children:"CriteriaTriggers"}),". Additionally, the JSON formats are defined on the ",(0,i.jsx)(n.a,{href:"https://minecraft.wiki/w/Advancement/JSON_format#List_of_triggers",children:"Minecraft Wiki"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"custom-criteria-triggers",children:"Custom Criteria Triggers"}),"\n",(0,i.jsxs)(n.p,{children:["Custom criteria triggers are made up of two parts: the trigger, which is activated in code at some point you specify by calling ",(0,i.jsx)(n.code,{children:"#trigger"}),", and the instance which defines the conditions under which the trigger should award the criterion. The trigger extends ",(0,i.jsx)(n.code,{children:"SimpleCriterionTrigger<T>"})," while the instance implements ",(0,i.jsx)(n.code,{children:"SimpleCriterionTrigger.SimpleInstance"}),". The generic value ",(0,i.jsx)(n.code,{children:"T"})," represents the trigger instance type."]}),"\n",(0,i.jsx)(n.h3,{id:"the-simplecriteriontriggersimpleinstance-implementation",children:"The SimpleCriterionTrigger.SimpleInstance Implementation"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"SimpleCriterionTrigger.SimpleInstance"})," represents a single criteria defined in the ",(0,i.jsx)(n.code,{children:"criteria"})," object. Trigger instances are responsible for holding the defined conditions, and returning whether the inputs match the condition."]}),"\n",(0,i.jsxs)(n.p,{children:["Conditions are usually passed in through the constructor. The ",(0,i.jsx)(n.code,{children:"SimpleCriterionTrigger.SimpleInstance"})," interface requires only one function, called ",(0,i.jsx)(n.code,{children:"#player"}),", which returns the conditions the player must meet as an ",(0,i.jsx)(n.code,{children:"Optional<ContextAwarePredicate>"}),". If the subclass is a Java record with a ",(0,i.jsx)(n.code,{children:"player"})," parameter of this type (as below), the automatically generated ",(0,i.jsx)(n.code,{children:"#player"})," method will suffice."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public record ExampleTriggerInstance(Optional<ContextAwarePredicate> player, ItemPredicate item) implements SimpleCriterionTrigger.SimpleInstance {\n  // extra methods here\n}\n"})}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.p,{children:["Typically, trigger instances have static helper methods which construct the full ",(0,i.jsx)(n.code,{children:"Criterion<T>"})," object from the arguments to the instance. This allows these instances to be easily created during data generation, but are optional."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// In this example, EXAMPLE_TRIGGER is a DeferredHolder<CriterionTrigger<?>>\npublic static Criterion<ExampleTriggerInstance> instance(ContextAwarePredicate player, ItemPredicate item) {\n  return EXAMPLE_TRIGGER.get().createCriterion(new ExampleTriggerInstance(Optional.of(player), item));\n}\n"})})]}),"\n",(0,i.jsxs)(n.p,{children:["Finally, a method should be added which takes in the current data state and returns whether the user has met the necessary conditions. The conditions of the player are already checked through ",(0,i.jsx)(n.code,{children:"SimpleCriterionTrigger#trigger(ServerPlayer, Predicate)"}),". Most trigger instances call this method ",(0,i.jsx)(n.code,{children:"#matches"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// This method is unique for each instance and is as such not overridden\npublic boolean matches(ItemStack stack) {\n  // Since ItemPredicate matches a stack, a stack is the input\n  return this.item.matches(stack);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"simplecriteriontrigger",children:"SimpleCriterionTrigger"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"SimpleCriterionTrigger<T>"})," subclass is responsible for specifying a codec to ",(0,i.jsx)(n.a,{href:"#serialization",children:"serialize"})," the trigger instance ",(0,i.jsx)(n.code,{children:"T"})," and supplying a method to check trigger instances and run attached listeners on success."]}),"\n",(0,i.jsxs)(n.p,{children:["The latter is done by defining a method to check all trigger instances and run the listeners if their condition is met. This method takes in the ",(0,i.jsx)(n.code,{children:"ServerPlayer"})," and whatever other data defined by the matching method in the ",(0,i.jsx)(n.code,{children:"SimpleCriterionTrigger.SimpleInstance"})," subclass. This method should internally call ",(0,i.jsx)(n.code,{children:"SimpleCriterionTrigger#trigger"})," to properly handle checking all listeners. Most trigger instances call this method ",(0,i.jsx)(n.code,{children:"#trigger"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// This method is unique for each trigger and is as such not a method to override\npublic void trigger(ServerPlayer player, ItemStack stack) {\n  this.trigger(player,\n    // The condition checker method within the SimpleCriterionTrigger.SimpleInstance subclass\n    triggerInstance -> triggerInstance.matches(stack)\n  );\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Finally, instances must be registered on the ",(0,i.jsx)(n.code,{children:"Registries.TRIGGER_TYPE"})," registry. Techniques for doing so can be found under ",(0,i.jsx)(n.a,{href:"/Neoforge-Korean-Documentation/en/docs/concepts/registries#methods-for-registering",children:"Registries"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"serialization",children:"Serialization"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.a,{href:"/Neoforge-Korean-Documentation/en/docs/datastorage/codecs",children:"codec"})," must be defined to serialize and deserialize the trigger instance. Vanilla typically creates this codec as a constant within the instance implementation that is then returned by the trigger's ",(0,i.jsx)(n.code,{children:"#codec"})," method."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"class ExampleTrigger extends SimpleCriterionTrigger<ExampleTrigger.ExampleTriggerInstance> {\n  @Override\n  public Codec<ExampleTriggerInstance> codec() {\n    return ExampleTriggerInstance.CODEC;\n  }\n  // ...\n  public class ExampleTriggerInstance implements SimpleCriterionTrigger.SimpleInstance {\n    public static final Codec<ExampleTriggerInstance> CODEC = ...;\n    // ...\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For the earlier example of a record with a ",(0,i.jsx)(n.code,{children:"ContextAwarePredicate"})," and an ",(0,i.jsx)(n.code,{children:"ItemPredicate"}),", the codec could be:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'RecordCodecBuilder.create(instance -> instance.group(\n  ExtraCodecs.strictOptionalField(EntityPredicate.ADVANCEMENT_CODEC, "player").forGetter(ExampleTriggerInstance::player),\n  ItemPredicate.CODEC.fieldOf("item").forGetter(ExampleTriggerInstance::item)\n).apply(instance, ExampleTriggerInstance::new));\n'})}),"\n",(0,i.jsx)(n.h3,{id:"calling-the-trigger",children:"Calling the Trigger"}),"\n",(0,i.jsxs)(n.p,{children:["Whenever the action being checked is performed, the ",(0,i.jsx)(n.code,{children:"#trigger"})," method defined by the ",(0,i.jsx)(n.code,{children:"SimpleCriterionTrigger"})," subclass should be called."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// In some piece of code where the action is being performed\n// Again, EXAMPLE_TRIGGER is a supplier for the registered instance of the custom criteria trigger\npublic void performExampleAction(ServerPlayer player, ItemStack stack) {\n  // Run code to perform action\n  EXAMPLE_TRIGGER.get().trigger(player, stack);\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advancement-rewards",children:"Advancement Rewards"}),"\n",(0,i.jsxs)(n.p,{children:["When an advancement is completed, rewards may be given out. These can be a combination of experience points, loot tables, recipes for the recipe book, or a ",(0,i.jsx)(n.a,{href:"https://minecraft.wiki/w/Function_(Java_Edition)",children:"function"})," executed as a creative player."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// In some advancement JSON\n"rewards": {\n  "experience": 10,\n  "loot": [\n    "minecraft:example_loot_table",\n    "minecraft:example_loot_table2"\n    // ...\n  ],\n  "recipes": [\n    "minecraft:example_recipe",\n    "minecraft:example_recipe2"\n    // ...\n  ],\n  "function": "minecraft:example_function"\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>s,a:()=>c});var i=r(7294);const t={},a=i.createContext(t);function c(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);